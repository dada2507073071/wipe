/*!w-wipe 0.0.1 发布日期:2018-11-12*/
var cas=document.getElementById("cas"),context=cas.getContext("2d"),_w=cas.width,_h=cas.height,t=0,radius=20,moveX=0,moveY=0,moveZ=0,moveW=0,isMouseDown=!1;function drawLine(e){isMouseDown&&(e.save(),e.beginPath(),e.lineCap="round",e.moveTo(moveX,moveY),e.lineWidth=2*radius,e.lineTo(moveZ,moveW),e.stroke(),e.restore())}function drawRect(e){e.fillStyle="#666",e.fill(),e.fillRect(0,0,_w,_h),e.globalCompositeOperation="destination-out"}function fn1(e){var o=e||window.event;moveZ=o.clientX,moveW=o.clientY,drawLine(context,moveX,moveY,moveZ,moveW),moveX=moveZ,moveY=moveW}function clearRect(e){e.clearRect(0,0,_w,_h)}function getTransparencyPercent(e){for(var o=e.getImageData(0,0,_w,_h),n=0;n<o.data.length;n+=4){0===o.data[n+3]&&t++}var a=t/(_w*_h)*100;return console.log("透明点个数："+t+"个"),console.log("占总面积"+Math.ceil(a)+"%"),Math.ceil(a)}cas.addEventListener("mousedown",function(e){var o=e||window.event;isMouseDown=!0,moveX=o.clientX,moveY=o.clientY},!1),cas.addEventListener("mousemove",fn1,!1),cas.addEventListener("mouseup",function(e){isMouseDown=!1,50<getTransparencyPercent(context)&&(alert("这是我曾血拼打下的江山，曾经追她穷如狗，现在看她嫌她丑，扔之可惜，牵之傻逼!!!"),clearRect(context))},!1),window.onload=function(){drawRect(context)};